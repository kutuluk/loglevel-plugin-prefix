!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof module&&module.exports?module.exports=t():e.prefix=t(e)}(this,function(e){"use strict";var o,t,a={template:"[%t] %l:%m",levelFormatter:function(e){return e.toUpperCase()},nameFormatter:function(e){return e||"root"},timestampFormatter:function(e){return e.toTimeString().replace(/.*(\d{2}:\d{2}:\d{2}).*/,"$1")},format:void 0},y={},r={reg:function(e){if(!e||!e.getLogger)throw new TypeError("Argument is not a root logger");o=e},apply:function(e,t){if(!e||!e.setLevel)throw new TypeError("Argument is not a logger");var r=e.methodFactory,x=e.name||"",n=y[x]||y[""]||a;return y[x]||(e.methodFactory=function(m,e,u){var c=r(m,e,u),g=y[u]||y[""],d=-1!==g.template.indexOf("%t"),s=-1!==g.template.indexOf("%l"),h=-1!==g.template.indexOf("%n"),v=-1!==g.template.indexOf("%m");return function(){var e="";let t=(new Error).stack,r=t.split("at");for(var n,o,a=r.findIndex(function(e){return-1!==e.indexOf("g.")||-1!==e.indexOf("Logger")}),i=r[a+1],l=arguments.length,f=Array(l),p=0;p<l;p++)f[p]=arguments[p];!x&&y[u]||(n=g.timestampFormatter(new Date),o=g.levelFormatter(m),a=g.nameFormatter(u),g.format?e+=g.format(o,a,n):(e+=g.template,d&&(e=e.replace(/%t/,n)),s&&(e=e.replace(/%l/,o)),h&&(e=e.replace(/%n/,a))),f.length&&"string"==typeof f[0]?(f[0]=e+" "+f[0],v&&(f[0]=f[0].replace(/%m/,""),f[0]+=i)):(v&&f.push(i),f.unshift(e))),c.apply(void 0,f)}}),(t=t||{}).template&&(t.format=void 0),y[x]=function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(t in arguments[r])Object.prototype.hasOwnProperty.call(arguments[r],t)&&(e[t]=arguments[r][t]);return e}({},n,t),e.setLevel(e.getLevel()),o||e.warn("It is necessary to call the function reg() of loglevel-plugin-prefix before calling apply. From the next release, it will throw an error. See more: https://github.com/kutuluk/loglevel-plugin-prefix/blob/master/README.md"),e}};return e&&(t=e.prefix,r.noConflict=function(){return e.prefix===r&&(e.prefix=t),r}),r});